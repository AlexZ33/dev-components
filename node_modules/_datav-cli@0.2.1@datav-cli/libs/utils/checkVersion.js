/**!
 * Copyright(c) Alibaba Group Holding Limited.
 *
 * Authors:
 *   米尔 <mier.xcy@alibaba-inc.com> 
 */

'use strict';

var config = require('../../package.json');
var colors = require('colors');
var latest = require('latest-version');
var co = require('co');

module.exports = function (callback) {
	co(function * (){
		var result = yield latest('datav-cli');
		var newVersion = result;
		var nowVersion = config.version;
		if (nowVersion !== newVersion) {
			console.log(colors.red('datav-cli 最新版本为' + newVersion + ', 本地版本为' + nowVersion));
      console.log(colors.red('请升级 -- npm install -g datav-cli@latest'));
		} else {
			console.log(colors.green('本地为最新版本' + newVersion));
		}
		callback && callback();
	});
}